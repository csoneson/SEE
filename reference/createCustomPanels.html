<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create custom panels — createCustomPanels • iSEE</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create custom panels — createCustomPanels" />
<meta property="og:description" content="Helper functions for quick-and-dirty creation of custom panels,
usually in the context of a one-off application.
This creates a new class with specialized methods for showing content based on a user-specified function." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">iSEE</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/basic.html">An introduction to the `r Biocpkg("iSEE")` interface 
</a>
    </li>
    <li>
      <a href="../articles/bigdata.html">How to use `r Biocpkg("iSEE")` with big data
</a>
    </li>
    <li>
      <a href="../articles/configure.html">Configuring `r Biocpkg("iSEE")` apps
</a>
    </li>
    <li>
      <a href="../articles/custom.html">Deploying custom panels in the `iSEE` interface</a>
    </li>
    <li>
      <a href="../articles/ecm.html">Describing the `ExperimentColorMap` class</a>
    </li>
    <li>
      <a href="../articles/links.html">Sharing information across `r Biocpkg("iSEE")` panels
</a>
    </li>
    <li>
      <a href="../articles/voice.html">Controlling the `iSEE` interface using speech recognition</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/iSEE/iSEE/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create custom panels</h1>
    <small class="dont-index">Source: <a href='https://github.com/iSEE/iSEE/blob/master/R/createCustomPanels.R'><code>R/createCustomPanels.R</code></a></small>
    <div class="hidden name"><code>createCustomPanels.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Helper functions for quick-and-dirty creation of custom panels,
usually in the context of a one-off application.
This creates a new class with specialized methods for showing content based on a user-specified function.</p>
    </div>

    <pre class="usage"><span class='fu'>createCustomTable</span><span class='op'>(</span>
  <span class='va'>FUN</span>,
  restrict <span class='op'>=</span> <span class='cn'>NULL</span>,
  className <span class='op'>=</span> <span class='st'>"CustomTable"</span>,
  fullName <span class='op'>=</span> <span class='st'>"Custom table"</span>,
  where <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ns-topenv.html'>topenv</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>createCustomPlot</span><span class='op'>(</span>
  <span class='va'>FUN</span>,
  restrict <span class='op'>=</span> <span class='cn'>NULL</span>,
  className <span class='op'>=</span> <span class='st'>"CustomPlot"</span>,
  fullName <span class='op'>=</span> <span class='st'>"Custom plot"</span>,
  where <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ns-topenv.html'>topenv</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>FUN</th>
      <td><p>A function that generates a data.frame or a ggplot,
for <code>createCustomTable</code> and <code>createCustomPlot</code> respectively.
See Details for the expected arguments.</p></td>
    </tr>
    <tr>
      <th>restrict</th>
      <td><p>Character vector of names of optional arguments in <code>FUN</code> to which the UI is restricted.
If specified, only the listed arguments receive UI elements in the interface.</p></td>
    </tr>
    <tr>
      <th>className</th>
      <td><p>String containing the name of the new <a href='Panel-class.html'>Panel</a> class.</p></td>
    </tr>
    <tr>
      <th>fullName</th>
      <td><p>String containing the full name of the new class.</p></td>
    </tr>
    <tr>
      <th>where</th>
      <td><p>An environment indicating where the class and method definitions should be stored.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A new class and its methods are defined in the global environment.
A generator function for creating new instances of the class is returned.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>FUN</code> is expected to have the following first 3 arguments:</p><ul>
<li><p><code>se</code>, a SummarizedExperiment object for the current dataset of interest.</p></li>
<li><p><code>rows</code>, a list of row selections received from the transmitting panel.
This contains one or more character vectors of row names in active and saved selections.
Alternatively, this may be <code>NULL</code> if no selection has been made in the transmitter.</p></li>
<li><p><code>columns</code>, a list of column selections received from the transmitting panel.
This contains one or more character vectors of column names in active and saved selections.
Alternatively, this may be <code>NULL</code> if no selection has been made in the transmitter.</p></li>
</ul>

<p>Any number of additional named arguments may also be present in <code>FUN</code>.
All such arguments should have default values,
as these are used to automatically generate UI elements in the panel:</p><ul>
<li><p>Character vectors will get a <code><a href='https://rdrr.io/pkg/shiny/man/selectInput.html'>selectInput</a></code>.</p></li>
<li><p>Strings will get a <code><a href='https://rdrr.io/pkg/shiny/man/textInput.html'>textInput</a></code>.</p></li>
<li><p>Numeric scalars will get a <code><a href='https://rdrr.io/pkg/shiny/man/numericInput.html'>numericInput</a></code>.</p></li>
<li><p>Logical scalars will get a <code><a href='https://rdrr.io/pkg/shiny/man/checkboxInput.html'>checkboxInput</a></code>.</p></li>
</ul><p>Arguments with other types of default values are ignored.
If <code>restrict</code> is specified, arguments will only have corresponding UI elements if they are listed in <code>restrict</code>.
All user interactions with these elements will automatically trigger regeneration of the panel contents.</p>
<p>Classes created via these functions are extremely limited.
Only scalar inputs are supported via the UI and all panels cannot transmit to the rest of the app.
We recommend only using these functions for one-off applications to quickly prototype concepts;
serious <a href='Panel-class.html'>Panel</a> extensions should be done explicitly.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Aaron Lun</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://bioconductor.org/packages/scater/'>scater</a></span><span class='op'>)</span>
<span class='va'>CUSTOM_DIMRED</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>se</span>, <span class='va'>rows</span>, <span class='va'>columns</span>, <span class='va'>ntop</span><span class='op'>=</span><span class='fl'>500</span>, <span class='va'>scale</span><span class='op'>=</span><span class='cn'>TRUE</span>,
    <span class='va'>mode</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"PCA"</span>, <span class='st'>"TSNE"</span>, <span class='st'>"UMAP"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>{</span>
    <span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NULL.html'>is.null</a></span><span class='op'>(</span><span class='va'>columns</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
        <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span>
            <span class='fu'>ggplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>theme_void</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>geom_text</span><span class='op'>(</span>
                <span class='fu'>aes</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, label<span class='op'>=</span><span class='va'>label</span><span class='op'>)</span>,
                <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>x<span class='op'>=</span><span class='fl'>0</span>, y<span class='op'>=</span><span class='fl'>0</span>, label<span class='op'>=</span><span class='st'>"No column data selected."</span><span class='op'>)</span>,
                size<span class='op'>=</span><span class='fl'>5</span><span class='op'>)</span>
            <span class='op'>)</span>
    <span class='op'>}</span>

    <span class='va'>mode</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/match.arg.html'>match.arg</a></span><span class='op'>(</span><span class='va'>mode</span><span class='op'>)</span>
    <span class='kw'>if</span> <span class='op'>(</span><span class='va'>mode</span><span class='op'>==</span><span class='st'>"PCA"</span><span class='op'>)</span> <span class='op'>{</span>
        <span class='va'>calcFUN</span> <span class='op'>&lt;-</span> <span class='va'>runPCA</span>
    <span class='op'>}</span> <span class='kw'>else</span> <span class='kw'>if</span> <span class='op'>(</span><span class='va'>mode</span><span class='op'>==</span><span class='st'>"TSNE"</span><span class='op'>)</span> <span class='op'>{</span>
        <span class='va'>calcFUN</span> <span class='op'>&lt;-</span> <span class='va'>runTSNE</span>
    <span class='op'>}</span> <span class='kw'>else</span> <span class='kw'>if</span> <span class='op'>(</span><span class='va'>mode</span><span class='op'>==</span><span class='st'>"UMAP"</span><span class='op'>)</span> <span class='op'>{</span>
        <span class='va'>calcFUN</span> <span class='op'>&lt;-</span> <span class='va'>runUMAP</span>
    <span class='op'>}</span>

    <span class='va'>kept</span> <span class='op'>&lt;-</span> <span class='va'>se</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>columns</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
    <span class='va'>kept</span> <span class='op'>&lt;-</span> <span class='fu'>calcFUN</span><span class='op'>(</span><span class='va'>kept</span>, ncomponents<span class='op'>=</span><span class='fl'>2</span>, ntop<span class='op'>=</span><span class='va'>ntop</span>,
        scale<span class='op'>=</span><span class='va'>scale</span>, subset_row<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>rows</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/pkg/scater/man/plotReducedDim.html'>plotReducedDim</a></span><span class='op'>(</span><span class='va'>kept</span>, <span class='va'>mode</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>GEN</span> <span class='op'>&lt;-</span> <span class='fu'>createCustomPlot</span><span class='op'>(</span><span class='va'>CUSTOM_DIMRED</span><span class='op'>)</span>
<span class='fu'>GEN</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Panel object of class CustomPlot
#&gt;   Get or set individual parameters with '[[' 
#&gt;   Available parameters:
#&gt;     ColumnSelectionDynamicSource: FALSE
#&gt;     ColumnSelectionRestrict: FALSE
#&gt;     ColumnSelectionSource: ---
#&gt;     DataBoxOpen: FALSE
#&gt;     mode: PCA
#&gt;     ntop: 500
#&gt;     PanelHeight: 500
#&gt;     PanelId: NA
#&gt;     PanelWidth: 4
#&gt;     RowSelectionDynamicSource: FALSE
#&gt;     RowSelectionRestrict: FALSE
#&gt;     RowSelectionSource: ---
#&gt;     scale: TRUE
#&gt;     SelectionBoxOpen: FALSE
#&gt;     SelectionHistory: 
#&gt;     VersionInfo: list of length 1</div><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>scRNAseq</span><span class='op'>)</span>
    <span class='va'>sce</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/scRNAseq/man/ReprocessedData.html'>ReprocessedAllenData</a></span><span class='op'>(</span><span class='st'>"tophat_counts"</span><span class='op'>)</span>
    <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://bioconductor.org/packages/scater/'>scater</a></span><span class='op'>)</span>
    <span class='va'>sce</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/scuttle/man/logNormCounts.html'>logNormCounts</a></span><span class='op'>(</span><span class='va'>sce</span>, exprs_values<span class='op'>=</span><span class='st'>"tophat_counts"</span><span class='op'>)</span>

    <span class='fu'><a href='iSEE.html'>iSEE</a></span><span class='op'>(</span><span class='va'>sce</span>, initial<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
        <span class='fu'><a href='ColumnDataPlot-class.html'>ColumnDataPlot</a></span><span class='op'>(</span>PanelId<span class='op'>=</span><span class='fl'>1L</span><span class='op'>)</span>,
        <span class='fu'>GEN</span><span class='op'>(</span>ColumnSelectionSource<span class='op'>=</span><span class='st'>"ColumnDataPlot1"</span><span class='op'>)</span>
    <span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kevin Rue-Albrecht, Federico Marini, Charlotte Soneson, Aaron Lun.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


